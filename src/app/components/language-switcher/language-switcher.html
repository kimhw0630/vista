<div class="language-switcher" (clickOutside)="closeDropdown()">
  <button 
    class="language-btn" 
    (click)="toggleDropdown()"
    [attr.aria-expanded]="isOpen"
    aria-label="Select language"
  >
    <img [src]="currentLanguage.flag" [alt]="currentLanguage.label" class="flag-img">
    <span class="language-code">{{ currentLanguage.code.toUpperCase() }}</span>
    <svg 
      class="chevron" 
      [class.rotate]="isOpen"
      width="12" 
      height="12" 
      viewBox="0 0 12 12" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <div class="dropdown-menu" [class.show]="isOpen">
    <button 
      *ngFor="let language of languages" 
      class="dropdown-item"
      [class.active]="language.code === currentLanguage.code"
      (click)="selectLanguage(language)"
    >
      <img [src]="language.flag" [alt]="language.label" class="flag-img-dropdown">
      <span class="label">{{ language.label }}</span>
      @if (language.code === currentLanguage.code) {
        <svg 
          class="check-icon" 
          width="16" 
          height="16" 
          viewBox="0 0 16 16" 
          fill="none" 
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M13.3333 4L6 11.3333L2.66667 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      }
    </button>
  </div>
</div>
